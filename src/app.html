<v-app>
  <v-system-bar>
    <v-spacer></v-spacer>
    <v-icon>mdi-square</v-icon>
    <v-icon>mdi-circle</v-icon>
    <v-icon>mdi-triangle</v-icon>
  </v-system-bar>
  
  <!-- 
    Sidebar is used to design models 
    `v-if` is used to show sidebar only when models are loaded/initiated
  -->
  <s-sidebar 
    :models="models"
    :active-model="activeModel"
    @addBlock="addBlock"
    @toggleBlock="toggleBlock"
    @moveBlockUp="moveBlockUp"
    @moveBlockDown="moveBlockDown"
    @minimizeAllBlocks="minimizeAllBlocks"
    @maximizeAllBlocks="maximizeAllBlocks"
    v-if="models && models.length > 0"
  ></s-sidebar>

  <v-app-bar 
    color="primary"
    location="top"
    app
    clipped-left
    dense
    style="transition: none !important"
  >
    <v-tabs
      bg-color="deep-purple-darken-4"
      center-active
      density="compact"
    >
      <v-tab>Model</v-tab>
      <v-tab>Data</v-tab>
    </v-tabs>
    <v-spacer></v-spacer>

    <v-btn
      v-bind="props"
      icon
    >
      <v-icon>mdi-plus</v-icon>
    </v-btn>

  </v-app-bar>

  <v-main class="content" style="transition: none !important">
    <div v-if="models && models.length && !(models[activeModel].modelParams.type && (models[activeModel].modelParams.type === 'dataframe'))" style="position: relative" class="graph-container">
      <div class="wl">
        <s-network
          class="net"
          ref="network"
          :nodes="graphNodes"
          :edges="graphLinks"
          @selectNode="selectNode"
        ></s-network>
        <s-inputs
          :blocks="models[activeModel].blocks"
          :models="models"
          :active-model="activeModel"
        ></s-inputs>
      </div>
    </div>

    <pre style="font-size: 9px; line-height: 9px;">{{ JSON.stringify(models, null, 2) }}</pre>
        <v-btn
          @click="console.log(baklava.editor.save())"
        >
          Save
        </v-btn>
        <!--
    <div class="flow" style="width: 100%; height: 800px">
        <s-flow></s-flow>
        <baklava-editor 
        v-if="baklava"
        :view-model="baklava" 
        ></baklava-editor>
        
      </div>
    -->
    
    <div id="loader"></div>
    <div class="charts wl"></div>
    <div class="charts-2d wl"></div>
    <div class="charts-extra wl"></div>
    <div class="archives wl"></div>
  </v-main>

  <v-app-bar
    color="primary"
    location="bottom"
    v-if="models && models.length > 0"
    fixed
    style="transition: none !important"
  >
    <v-app-bar-title>Photos</v-app-bar-title>

    <v-select
      v-model="models[activeModel].modelParams.method"
      :items="Object.keys(simulationMethods)"
      :rules="[v => !!v || 'Item is required']"
      density="compact"
      label="Inference method"
      hide-details
      required
    ></v-select>

    <template v-slot:append>
        <v-btn
          prepend-icon="mdi-cog"
          variant="outlined"
          @click="toggleRightSidenav"
        >
          Settings
        </v-btn>
        <v-btn
          prepend-icon="mdi-play"
          variant="outlined"
          @click="run"
        >
          Run
        </v-btn>
    </template>
  </v-app-bar>

<v-snackbar v-model="notificationFlag">
  {{ notificationText }}
  <template v-slot:actions>
    <v-btn
      color="pink"
      variant="text"
      @click="notificationFlag = false"
    >
      Close
    </v-btn>
  </template>
</v-snackbar>

</v-app>